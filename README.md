# VK message parser

Лёгкий в использовании скрипт для сбора статистики сообщений во ВКонтакте. Теперь вы сможете легко получить из беседы:

- сообщения и их даты
- изображения и ссылки на них
- стикеры и их изображения
- ссылки на внешние ресурсы
- видео и их продолжительность
- документы и ссылки на файлы
- аудио и их продолжительность
- аудиозаписи со ссылками для скачивания, их продолжительность и текстовый перевод
- звонки и их статистику
- подарки, их изображения и отметки о подаренных стикерах
- записи со стены
- граффити в виде изображений
- истории и их статистику

## Установка и настройка

Скачайте и установите [PostgreSQL](https://www.postgresql.org/download/) (тестировалось на версии 13)
и [Python 3.6+](https://www.python.org/downloads/)

Подключитесь к PostgreSQL и создайте базу с удобным названием. По умолчанию используется vk_messages.

В терминале вашей IDE введите следующие команды, чтобы клонировать репозиторий и установить зависимости:

```
git clone https://github.com/Malkiz223/vk-message-parser && cd vk-message-parser
```

```
pip install -r requirements.txt
```

Отредактируйте файл `settings.py`, введя свои данные. Можно ввести
либо `access token` [[получить](https://vkhost.github.io/)], либо логин с паролем.

Скрипт готов к работе, вы великолепны!

## Как пользоваться скриптом

Откройте файл `main.py` и назначьте переменной `friend_id` значение id пользователя, с которым нужно вытащить переписку.
Самые удобные способы по получению id пользователя:

- Откройте чат с пользователем. Скопируйте значение, идущее за `sel=`
- Откройте профиль пользователя и скопируйте значение, идущее за https://vk.com/

Запустите `main.py`. Если вы запускаете скрипт впервые и у вас установлена двухфакторная аутентификация — введите код в
консоль. Начнётся сканирование сообщений и запись в базу. Чтобы сканировать сообщения всех пользователей, необходимо
пройтись в цикле по списку id собеседников.